{% extends 'base.html.twig' %}
{% block body %}

{#{{ dump(app.request) }}#}

<div class="container">

    <div class="row m-5">
        <div class="col">
            <h3 class="text-center">Connectez-vous</h3>
        </div>
    </div>

    {% if error %}
        <div class="alert alert-danger">
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
    {% endif %}

    {% for message in app.Flashes('success') %}
        <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            {{ message }}
        </div>
    {% endfor %}
    {#<form method="POST" class="login">#}
        {#<div class="form-group">#}
            {#{{ form_start(form) }}#}
            {#<div class="field">#}
                {#{{ form_label(form.username, 'login.form.username'|trans, {'label_attr': {'class': 'label has-text-left'}}) }}#}
                {#<div class="control has-icons-left">#}
                    {#{{ form_widget(form.username, {'value': lastUserName, 'attr': {'class': 'input'}}) }}#}
                    {#<span class="icon is-small is-left">#}
                               {#<i class="fa fa-user" aria-hidden="true"></i>#}
                               {#</span>#}
                {#</div>#}
            {#</div>#}

            {#<div class="field">#}
                {#{{ form_label(form.password, 'login.form.password'|trans, {'label_attr': {'class': 'label has-text-left'}}) }}#}
                {#<div class="control has-icons-left">#}
                    {#{{ form_widget(form.password, {'attr': {'class': 'input'}}) }}#}
                    {#<span class="icon is-small is-left">#}
                          {#<i class="fa fa-lock" aria-hidden="true"></i>#}
                         {#</span>#}
                {#</div>#}
            {#</div>#}

            {#{% if (error) %}#}
                {#<div class="login-message">#}
                    {#{{ error.messageKey|trans(error.messageData, 'messages') }}#}
                {#</div>#}
            {#{% endif %}#}

            {#<button type="submit" class="button is-primary" data-trans="{{ 'login.form.submitted'|trans }}">#}
                {#{{ 'login.login'|trans }}#}
            {#</button>#}
            {#{{ form_end(form) }}#}

            {#<a href="{{ path('password_reset_request') }}">{{ 'login.forgot_password'|trans }}</a><br/>#}
            {#{{ 'login.not_registered'|trans }}#}
            {#<a href="{{ path('inscription-auteur') }}">{{ 'login.create_account'|trans }}</a>#}
            {#<a href="{{ path('inscription-lecteur') }}">{{ 'login.create_account'|trans }}</a>#}




            {#<label for="email">Adresse mail </label>#}
            {#<input type="email" class="form-control" id="email" value="" autocomplete="off" placeholder="Votre adresse email">#}
        {#</div>#}
        {#<div class="form-group">#}
            {#<label for="password">Mot de passe</label>#}
            {#<input type="password" class="form-control" id="password" value="" autocomplete="off" placeholder="Votre mot de passe">#}
            {#<a href="#!"><small id="emailHelp" class="form-text">Mot de passe oublié ?</small></a>#}
        {#</div>#}
        {#<button type="submit" class="login btn-default">Se connecter</button>#}
    {#</form>#}

    <form class="login " action="{{ path('security_login') }}" method="post">
        <div class="form-group">
            <label for="_username">Votre email :</label>
            <input class="form-control" type="email" id="email" name="_username" placeholder="Tapez votre email" value="{{ last_username }}"/>
        </div>
        <div class="form-group mt-5">
            <label for="password">Votre mot de passe :</label>
            {#<a href="#" class="float-right link">Mot de passe oublié ?</a>#}
            <input  class="form-control" type="password" id="password" name="_password" placeholder="Tapez votre mot de passe" />
        </div>
        {#
            If you want to control the URL the user
            is redirected to on success (more details below)
            <input type="hidden" name="_target_path" value="/account" />
        #}
        <button class="btn w-100 submit" type="submit">Valider</button>
    </form>
</div>
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <p>Email: {{ app.user.email }}</p>
    {% endif %}
{% endblock %}